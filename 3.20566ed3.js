(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{810:function(e,n,t){var o=t(131),r=t(811),a=t(182),i=t(816),s=a((function(e,n){if(null==e)return[];var t=n.length;return t>1&&i(e,n[0],n[1])?n=[]:t>2&&i(n[0],n[1],n[2])&&(n=[n[0]]),r(e,o(n,1),[])}));e.exports=s},811:function(e,n,t){var o=t(115),r=t(132),a=t(183),i=t(812),s=t(813),c=t(134),u=t(814),l=t(118),d=t(43);e.exports=function(e,n,t){n=n.length?o(n,(function(e){return d(e)?function(n){return r(n,1===e.length?e[0]:e)}:e})):[l];var f=-1;n=o(n,c(a));var v=i(e,(function(e,t,r){return{criteria:o(n,(function(n){return n(e)})),index:++f,value:e}}));return s(v,(function(e,n){return u(e,n,t)}))}},812:function(e,n,t){var o=t(240),r=t(114);e.exports=function(e,n){var t=-1,a=r(e)?Array(e.length):[];return o(e,(function(e,o,r){a[++t]=n(e,o,r)})),a}},813:function(e,n){e.exports=function(e,n){var t=e.length;for(e.sort(n);t--;)e[t]=e[t].value;return e}},814:function(e,n,t){var o=t(815);e.exports=function(e,n,t){for(var r=-1,a=e.criteria,i=n.criteria,s=a.length,c=t.length;++r<s;){var u=o(a[r],i[r]);if(u)return r>=c?u:u*("desc"==t[r]?-1:1)}return e.index-n.index}},815:function(e,n,t){var o=t(117);e.exports=function(e,n){if(e!==n){var t=void 0!==e,r=null===e,a=e==e,i=o(e),s=void 0!==n,c=null===n,u=n==n,l=o(n);if(!c&&!l&&!i&&e>n||i&&s&&u&&!c&&!l||r&&s&&u||!t&&u||!a)return 1;if(!r&&!i&&!l&&e<n||l&&t&&a&&!r&&!i||c&&t&&a||!s&&a||!u)return-1}return 0}},816:function(e,n,t){var o=t(188),r=t(114),a=t(133),i=t(46);e.exports=function(e,n,t){if(!i(t))return!1;var s=typeof n;return!!("number"==s?r(t)&&a(n,t.length):"string"==s&&n in t)&&o(t[n],e)}},832:function(e,n,t){"use strict";t.r(n);var o=t(8),r=t(10),a=t(657),i=t(7),s=t(14),c=t.n(s),u=t(11),l=t(0),d=t.n(l),f=t(105),v=t.n(f),p=t(669),h=t.n(p),y=t(293),w=t.n(y),g=t(50),m=t.n(g),b=t(28),O=t(18),A=t.n(O),j=t(810),I=t.n(j),C=t(288),P=t.n(C),k=t(292),R=t(294);function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){x(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function x(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function M(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var o,r,a=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(o=t.next()).done)&&(a.push(o.value),!n||a.length!==n);i=!0);}catch(e){s=!0,r=e}finally{try{i||null==t.return||t.return()}finally{if(s)throw r}}return a}(e,n)||W(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,n){if(e){if("string"==typeof e)return D(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?D(e,n):void 0}}function D(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function z(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function U(e,n){return(U=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function V(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,o=B(e);if(n){var r=B(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return _(this,t)}}function _(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return H(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&U(e,n)}(a,e);var n,t,o,r=V(a);function a(e){var n;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,a),(n=r.call(this,e)).ref=d.a.createRef(),n.osdCanvasOverlay=null,n.updateCanvas=function(){},n.onUpdateViewport=n.onUpdateViewport.bind(H(n)),n.onCanvasClick=n.onCanvasClick.bind(H(n)),n.onCanvasMouseMove=v()(n.onCanvasMouseMove.bind(H(n)),10),n.onCanvasExit=n.onCanvasExit.bind(H(n)),n}return n=a,o=[{key:"annotationsMatch",value:function(e,n){return!e&&!n||!(e&&!n||!e&&n)&&(0===e.length&&0===n.length||e.length===n.length&&e.every((function(e,t){var o=e.resources.map((function(e){return e.id})),r=n[t].resources.map((function(e){return e.id}));return 0===o.length&&0===r.length||o.length===r.length&&!(e.id!==n[t].id||!h()(o,r))})))}}],(t=[{key:"componentDidMount",value:function(){this.initializeViewer()}},{key:"componentDidUpdate",value:function(e){var n=this.props,t=n.drawAnnotations,o=n.drawSearchAnnotations,r=n.annotations,i=n.searchAnnotations,s=n.hoveredAnnotationIds,c=n.selectedAnnotationId,u=n.highlightAllAnnotations,l=n.viewer;this.initializeViewer();var d=!a.annotationsMatch(r,e.annotations),f=!a.annotationsMatch(i,e.searchAnnotations),v=P()(s,e.hoveredAnnotationIds).length>0;this.osdCanvasOverlay&&v&&(s.length>0?this.osdCanvasOverlay.canvasDiv.style.cursor="pointer":this.osdCanvasOverlay.canvasDiv.style.cursor="");var p=c!==e.selectedAnnotationId,h=t!==e.drawAnnotations||o!==e.drawSearchAnnotations||u!==e.highlightAllAnnotations;(f||d||p||v||h)&&(this.updateCanvas=this.canvasUpdateCallback(),l.forceRedraw())}},{key:"componentWillUnmount",value:function(){var e=this.props.viewer;e.removeHandler("canvas-click",this.onCanvasClick),e.removeHandler("canvas-exit",this.onCanvasExit),e.removeHandler("update-viewport",this.onUpdateViewport),e.removeHandler("mouse-move",this.onCanvasMouseMove)}},{key:"onCanvasClick",value:function(e){var n=this,t=this.props.canvasWorld,o=e.position,r=e.eventSource.viewport.pointFromPixel(o),a=t.canvasAtPoint(r);if(a){var i=E(t.canvasToWorldCoordinates(a.id),4),s=(i[0],i[1],i[2]),c=i[3],u=this.annotationsAtPoint(a,r);if(u.length>0&&(e.preventDefaultAction=!0),1===u.length)this.toggleAnnotation(u[0].id);else if(u.length>0){var l=function(e){var t=Math.PI/180;return function(o){for(var i=0,s=0;s<360;s+=1){var c=Math.cos(s*t)*e+r.x,u=Math.sin(s*t)*e+r.y;n.isAnnotationAtPoint(o,a,{x:c,y:u})&&(i+=1)}return{anno:o,score:i}}},d=[],f=1;for(d=I()(u.map(l(f)),"score");f<Math.max(s,c)&&d[0].score===d[1].score;)f*=2,d=I()(u.map(l(f)),"score");this.toggleAnnotation(d[0].anno.id)}}}},{key:"onCanvasMouseMove",value:function(e){var n=this.props,t=n.annotations,o=n.canvasWorld,r=n.hoverAnnotation,a=n.hoveredAnnotationIds,i=n.searchAnnotations,s=n.viewer,c=n.windowId;if(0!==t.length||0!==i.length){var u=e.position,l=s.viewport.pointFromPixel(u),d=o.canvasAtPoint(l);if(d){var f=this.annotationsAtPoint(d,l);P()(a,f.map((function(e){return e.id}))).length>0&&r(c,f.map((function(e){return e.id})))}else r(c,[])}}},{key:"onCanvasExit",value:function(e){var n=this.props,t=n.hoverAnnotation,o=n.windowId;this.onCanvasMouseMove.cancel(),t(o,[])}},{key:"onUpdateViewport",value:function(e){this.updateCanvas()}},{key:"initializeViewer",value:function(){var e=this.props.viewer;e&&(this.osdCanvasOverlay||(this.osdCanvasOverlay=new k.a(e,this.ref),e.addHandler("canvas-click",this.onCanvasClick),e.addHandler("canvas-exit",this.onCanvasExit),e.addHandler("update-viewport",this.onUpdateViewport),e.addHandler("mouse-move",this.onCanvasMouseMove),this.updateCanvas=this.canvasUpdateCallback()))}},{key:"canvasUpdateCallback",value:function(){var e=this;return function(){e.osdCanvasOverlay.clear(),e.osdCanvasOverlay.resize(),e.osdCanvasOverlay.canvasUpdate(e.renderAnnotations.bind(e))}}},{key:"isAnnotationAtPoint",value:function(e,n,t){var o=E(this.props.canvasWorld.canvasToWorldCoordinates(n.id),2),r=o[0],a=o[1],i=t.x-r,s=t.y-a;if(e.svgSelector){var c=this.osdCanvasOverlay.context2d;return M(new R.a({resource:e}).svgPaths).some((function(e){return c.isPointInPath(new Path2D(e.attributes.d.nodeValue),i,s)}))}if(e.fragmentSelector){var u=E(e.fragmentSelector,4),l=u[0],d=u[1],f=u[2],v=u[3];return l<=i&&i<=l+f&&d<=s&&s<=d+v}return!1}},{key:"annotationsAtPoint",value:function(e,n){var t=this,o=this.props,r=o.annotations,a=o.searchAnnotations,i=[].concat(M(r),M(a));return c()(i.map((function(e){return e.resources}))).filter((function(o){return e.id===o.targetId&&t.isAnnotationAtPoint(o,e,n)}))}},{key:"toggleAnnotation",value:function(e){var n=this.props,t=n.selectedAnnotationId,o=n.selectAnnotation,r=n.deselectAnnotation,a=n.windowId;t===e?r(a,e):o(a,e)}},{key:"annotationsToContext",value:function(e,n){var t=this.props,o=t.highlightAllAnnotations,r=t.hoveredAnnotationIds,a=t.selectedAnnotationId,i=t.canvasWorld,s=t.viewer,c=this.osdCanvasOverlay.context2d,u=s.viewport.getZoom(!0)/s.viewport.getMaxZoom();e.forEach((function(e){e.resources.forEach((function(e){if(i.canvasIds.includes(e.targetId)){var t=i.offsetByCanvas(e.targetId);new R.a({hovered:r.includes(e.id),offset:t,palette:T(T({},n),{},{default:T(T({},n.default),!o&&n.hidden)}),resource:e,selected:a===e.id,zoomRatio:u}).toContext(c)}}))}))}},{key:"renderAnnotations",value:function(){var e=this.props,n=e.annotations,t=e.drawAnnotations,o=e.drawSearchAnnotations,r=e.searchAnnotations,a=e.palette;o&&this.annotationsToContext(r,a.search),t&&this.annotationsToContext(n,a.annotations)}},{key:"render",value:function(){var e=this.props.viewer;return e?A.a.createPortal(d.a.createElement("div",{ref:this.ref,style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},d.a.createElement("canvas",null)),e.canvas):d.a.createElement(d.a.Fragment,null)}}])&&z(n.prototype,t),o&&z(n,o),a}(l.Component);F.defaultProps={annotations:[],deselectAnnotation:function(){},drawAnnotations:!0,drawSearchAnnotations:!0,highlightAllAnnotations:!1,hoverAnnotation:function(){},hoveredAnnotationIds:[],palette:{},searchAnnotations:[],selectAnnotation:function(){},selectedAnnotationId:void 0,viewer:null};var N=t(305),J=t(330),X=t(295),Y=t(65),Z=t(95),$=t(23),q=t(320),G={deselectAnnotation:N.a,hoverAnnotation:N.b,selectAnnotation:N.g},K=Object(o.compose)(Object(a.a)(),Object(r.b)((function(e,n){var t=n.windowId;return{annotations:Object(J.d)(e,{windowId:t}),canvasWorld:Object(X.a)(e,{windowId:t}),drawAnnotations:Object(Y.a)(e).window.forceDrawAnnotations||Object(Z.e)(e,{content:"annotations",windowId:t}).length>0,drawSearchAnnotations:Object(Y.a)(e).window.forceDrawAnnotations||Object(Z.e)(e,{content:"search",windowId:t}).length>0,highlightAllAnnotations:Object($.e)(e,{windowId:t}).highlightAllAnnotations,hoveredAnnotationIds:Object($.e)(e,{windowId:t}).hoveredAnnotationIds,palette:Object(Y.g)(e).palette,searchAnnotations:Object(q.f)(e,{windowId:t}),selectedAnnotationId:Object(J.e)(e,{windowId:t})}}),G),Object(u.a)("AnnotationsOverlay"))(F),L=t(78),Q={get:function(e){return this.refs[e]},refs:{},set:function(e,n){this.refs[e]=n}};function ee(e,n,t){return(ee=le()?Reflect.construct:function(e,n,t){var o=[null];o.push.apply(o,n);var r=new(Function.bind.apply(e,o));return t&&se(r,t.prototype),r}).apply(null,arguments)}function ne(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return te(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return te(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function oe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function re(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?oe(Object(t),!0).forEach((function(n){ae(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ae(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ie(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function se(e,n){return(se=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function ce(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return ue(e)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fe=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&se(e,n)}(s,e);var n,t,o,r,a,i=(n=s,t=le(),function(){var e,o=de(n);if(t){var r=de(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return ce(this,e)});function s(e){var n;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,s),(n=i.call(this,e)).state={viewer:void 0},n.ref=d.a.createRef(),n.apiRef=d.a.createRef(),Q.set(e.windowId,n.apiRef),n.onCanvasMouseMove=v()(n.onCanvasMouseMove.bind(ue(n)),10),n.onViewportChange=n.onViewportChange.bind(ue(n)),n.zoomToWorld=n.zoomToWorld.bind(ue(n)),n.osdUpdating=!1,n}return o=s,(r=[{key:"componentDidMount",value:function(){var e=this,n=this.props,t=n.osdConfig,o=n.t,r=n.windowId;if(this.ref.current){var a=new w.a(re({id:this.ref.current.id},t)),i=a.canvas&&a.canvas.firstElementChild;i&&(i.setAttribute("role","img"),i.setAttribute("aria-label",o("digitizedView")),i.setAttribute("aria-describedby","".concat(r,"-osd"))),this.apiRef.current=a,this.setState({viewer:a}),a.addHandler("animation-start",(function(){e.osdUpdating=!0})),a.addHandler("animation-finish",this.onViewportChange),a.addHandler("animation-finish",(function(){e.osdUpdating=!1})),a.innerTracker&&(a.innerTracker.moveHandler=this.onCanvasMouseMove)}}},{key:"componentDidUpdate",value:function(e,n){var t=this.props,o=t.viewerConfig,r=t.canvasWorld,a=this.state.viewer;if(this.apiRef.current=a,void 0===n.viewer)return o&&(a.viewport.panTo(o,!0),a.viewport.zoomTo(o.zoom,o,!0),void 0!==o.degrees&&a.viewport.setRotation(o.degrees),void 0!==o.flip&&a.viewport.setFlip(o.flip)),void this.addAllImageSources(!o);if(this.infoResponsesMatch(e.infoResponses)&&this.nonTiledImagedMatch(e.nonTiledImages))if(h()(r.layers,e.canvasWorld.layers)){if(o&&!this.osdUpdating){var i=a.viewport;o.x===i.centerSpringX.target.value&&o.y===i.centerSpringY.target.value||i.panTo(o,!1),o.zoom!==i.zoomSpring.target.value&&i.zoomTo(o.zoom,o,!1),o.rotation!==i.getRotation()&&i.setRotation(o.rotation),o.flip!==i.getFlip()&&i.setFlip(o.flip)}}else this.refreshTileProperties();else{a.close();var s=!h()(r.canvasIds,e.canvasWorld.canvasIds);this.addAllImageSources(s||!o)}}},{key:"componentWillUnmount",value:function(){var e=this.state.viewer;e.innerTracker&&e.innerTracker.moveHandler===this.onCanvasMouseMove&&(e.innerTracker.moveHandler=null),e.removeAllHandlers(),this.apiRef.current=void 0}},{key:"onCanvasMouseMove",value:function(e){this.state.viewer.raiseEvent("mouse-move",e)}},{key:"onViewportChange",value:function(e){var n=this.props,t=n.updateViewport,o=n.windowId,r=e.eventSource.viewport;t(o,{flip:r.getFlip(),rotation:r.getRotation(),x:Math.round(r.centerSpringX.target.value),y:Math.round(r.centerSpringY.target.value),zoom:r.zoomSpring.target.value})}},{key:"addAllImageSources",value:function(){var e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props,o=t.nonTiledImages,r=t.infoResponses;Promise.all(r.map((function(n){return e.addTileSource(n)})),o.map((function(n){return e.addNonTiledImage(n)}))).then((function(){(r[0]||o[0])&&(n&&e.zoomToWorld(),e.refreshTileProperties())}))}},{key:"addNonTiledImage",value:function(e){var n=this.props.canvasWorld,t=this.state.viewer,o=e.getProperty("type"),r=e.getProperty("format")||"";return"Image"===o||"dctypes:Image"===o||r.startsWith("image/")?new Promise((function(o,r){t||r(),t.addSimpleImage({error:function(e){return r(e)},fitBounds:ee(w.a.Rect,ne(n.contentResourceToWorldCoordinates(e))),index:n.layerIndexOfImageResource(e),opacity:n.layerOpacityOfImageResource(e),success:function(e){return o(e)},url:e.id})})):Promise.resolve()}},{key:"addTileSource",value:function(e){var n=this.props.canvasWorld,t=this.state.viewer;return new Promise((function(o,r){t||r();var a=re({},e.json),i=n.contentResource(e.id);i&&t.addTiledImage({error:function(e){return r(e)},fitBounds:ee(w.a.Rect,ne(n.contentResourceToWorldCoordinates(i))),index:n.layerIndexOfImageResource(i),opacity:n.layerOpacityOfImageResource(i),success:function(e){return o(e)},tileSource:a})}))}},{key:"refreshTileProperties",value:function(){for(var e=this.props.canvasWorld,n=this.state.viewer.world,t=[],o=0;o<n.getItemCount();o+=1)t.push(n.getItemAt(o));t.forEach((function(t,o){var r=e.contentResource(t.source["@id"]||t.source.id);if(r){var a=e.layerIndexOfImageResource(r);o!==a&&n.setItemIndex(t,a),t.setOpacity(e.layerOpacityOfImageResource(r))}}))}},{key:"fitBounds",value:function(e,n,t,o){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.state.viewer;a.viewport.fitBounds(new w.a.Rect(e,n,t,o),r)}},{key:"infoResponsesMatch",value:function(e){var n=this.props.infoResponses;return 0===n.length&&0===e.length||n.length===e.length&&n.every((function(n,t){return!!(e[t]&&n.json&&e[t].json&&n.tokenServiceId===e[t].tokenServiceId&&(n.json["@id"]&&n.json["@id"]===e[t].json["@id"]||n.json.id&&n.json.id===e[t].json.id))}))}},{key:"nonTiledImagedMatch",value:function(e){var n=this.props.nonTiledImages;return 0===n.length&&0===e.length||n.some((function(n,t){return!!e[t]&&n.id===e[t].id}))}},{key:"zoomToWorld",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.props.canvasWorld;this.fitBounds.apply(this,ne(n.worldBounds()).concat([e]))}},{key:"render",value:function(){var e=this,n=this.props,t=n.children,o=n.classes,r=n.label,a=n.t,i=n.windowId,s=n.drawAnnotations,c=this.state.viewer,u=d.a.Children.map(t,(function(n){return d.a.cloneElement(n,{zoomToWorld:e.zoomToWorld})}));return d.a.createElement(d.a.Fragment,null,d.a.createElement("section",{className:m()(Object(b.a)("osd-container"),o.osdContainer),id:"".concat(i,"-osd"),ref:this.ref,"aria-label":a("item",{label:r}),"aria-live":"polite"},s&&d.a.createElement(K,{viewer:c,windowId:i}),u,d.a.createElement(L.a,Object.assign({viewer:c},re(re({},this.props),{},{children:null})))))}}])&&ie(o.prototype,r),a&&ie(o,a),s}(l.Component);fe.defaultProps={children:null,drawAnnotations:!1,infoResponses:[],label:null,nonTiledImages:[],osdConfig:{},viewerConfig:null};var ve=t(273),pe=t(36),he={updateViewport:ve.d},ye=Object(o.compose)(Object(i.a)({osdContainer:{flex:1,position:"relative"}}),Object(a.a)(),Object(r.b)((function(e,n){var t=n.windowId,o=Object(X.a)(e,{windowId:t}),r=Object(pe.q)(e),a=c()(o.canvases.map((function(e){return e.imageServiceIds})));return{canvasWorld:o,drawAnnotations:Object(Y.a)(e).window.forceDrawAnnotations||Object(Z.e)(e,{content:"annotations",windowId:t}).length>0||Object(Z.e)(e,{content:"search",windowId:t}).length>0,infoResponses:a.map((function(e){return r[e]})).filter((function(e){return void 0!==e&&!1===e.isFetching&&void 0===e.error})),label:Object(pe.e)(e,{canvasId:(Object(pe.g)(e,{windowId:t})||{}).id,windowId:t}),nonTiledImages:Object(pe.m)(e,{windowId:t}),osdConfig:Object(Y.a)(e).osdConfig,viewerConfig:Object($.d)(e,{windowId:t})}}),he),Object(u.a)("OpenSeadragonViewer"));n.default=ye(fe)}}]);
//# sourceMappingURL=3.20566ed3.js.map